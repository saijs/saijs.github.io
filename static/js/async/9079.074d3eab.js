"use strict";(self.webpackChunksaijs=self.webpackChunksaijs||[]).push([["9079"],{7639:function(n,e,r){r.r(e),r.d(e,{default:()=>i});var s=r(2676),t=r(453);function d(n){let e=Object.assign({h1:"h1",a:"a",hr:"hr",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",p:"p",pre:"pre",code:"code",h2:"h2",ol:"ol",li:"li",ul:"ul"},(0,t.ah)(),n.components);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(e.h1,{id:"错误的数量词",children:["错误的数量词",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#错误的数量词",children:"#"})]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsxs)(e.table,{children:["\n",(0,s.jsxs)(e.thead,{children:["\n",(0,s.jsxs)(e.tr,{children:["\n",(0,s.jsx)(e.th,{children:"Language"}),"\n",(0,s.jsx)(e.th,{children:"Message"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.tbody,{children:["\n",(0,s.jsxs)(e.tr,{children:["\n",(0,s.jsx)(e.td,{children:"简体中文"}),"\n",(0,s.jsx)(e.td,{children:"错误的数量词"}),"\n"]}),"\n",(0,s.jsxs)(e.tr,{children:["\n",(0,s.jsx)(e.td,{}),"\n",(0,s.jsx)(e.td,{children:"意外的限定符"}),"\n"]}),"\n",(0,s.jsxs)(e.tr,{children:["\n",(0,s.jsx)(e.td,{}),"\n",(0,s.jsx)(e.td,{children:"意外的数量词"}),"\n"]}),"\n",(0,s.jsxs)(e.tr,{children:["\n",(0,s.jsx)(e.td,{children:"繁体中文"}),"\n",(0,s.jsx)(e.td,{children:"非預期的數量詞"}),"\n"]}),"\n",(0,s.jsxs)(e.tr,{children:["\n",(0,s.jsx)(e.td,{}),"\n",(0,s.jsx)(e.td,{children:"未預期的次數符號"}),"\n"]}),"\n",(0,s.jsxs)(e.tr,{children:["\n",(0,s.jsx)(e.td,{children:"英文"}),"\n",(0,s.jsx)(e.td,{children:"Unexpected quantifier"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"正则表达式的量词（ +, *, {m,n} ）不合法，大都是在 new RegExp(str_reg) 时，\nstr_reg 未作安全处理时抛出。\n安全的将字符串 new RegExp 应先将字符串转义处理，需转义的字符包括以下列出的部分："}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:'RegExp.escape = function(source){\n  return String(source).replace(/([\\!\\\\\\/\\.\\$\\*\\^\\(\\)\\[\\]\\{\\}\\?\\+\\-\\|])/g, "\\\\$1");\n};\n'})}),"\n",(0,s.jsxs)(e.h2,{id:"案例",children:["案例",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#案例",children:"#"})]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:'new RegExp("+");\n'})}),"\n",(0,s.jsxs)(e.table,{children:["\n",(0,s.jsxs)(e.thead,{children:["\n",(0,s.jsxs)(e.tr,{children:["\n",(0,s.jsx)(e.th,{children:"Browser"}),"\n",(0,s.jsx)(e.th,{children:"Language"}),"\n",(0,s.jsx)(e.th,{children:"Message"}),"\n",(0,s.jsx)(e.th,{children:"Number"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.tbody,{children:["\n",(0,s.jsxs)(e.tr,{children:["\n",(0,s.jsx)(e.td,{children:"IE"}),"\n",(0,s.jsx)(e.td,{children:"简体中文"}),"\n",(0,s.jsx)(e.td,{children:"错误的数量词"}),"\n",(0,s.jsx)(e.td,{children:"-2146823270"}),"\n"]}),"\n",(0,s.jsxs)(e.tr,{children:["\n",(0,s.jsx)(e.td,{children:"Chrome"}),"\n",(0,s.jsx)(e.td,{children:"英文"}),"\n",(0,s.jsx)(e.td,{children:"Invalid regular expression: /+/: Nothing to repeat"}),"\n",(0,s.jsx)(e.td,{}),"\n"]}),"\n",(0,s.jsxs)(e.tr,{children:["\n",(0,s.jsx)(e.td,{children:"Firefox"}),"\n",(0,s.jsx)(e.td,{}),"\n",(0,s.jsx)(e.td,{children:"invalid quantifier"}),"\n",(0,s.jsx)(e.td,{}),"\n"]}),"\n",(0,s.jsxs)(e.tr,{children:["\n",(0,s.jsx)(e.td,{children:"Opera"}),"\n",(0,s.jsx)(e.td,{}),"\n",(0,s.jsx)(e.td,{children:"RegExp constructor: invalid regular expression"}),"\n",(0,s.jsx)(e.td,{}),"\n"]}),"\n",(0,s.jsxs)(e.tr,{children:["\n",(0,s.jsx)(e.td,{children:"Safari"}),"\n",(0,s.jsx)(e.td,{}),"\n",(0,s.jsx)(e.td,{children:"Invalid regular expression: nothing to repeat"}),"\n",(0,s.jsx)(e.td,{}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsxs)(e.table,{children:["\n",(0,s.jsxs)(e.thead,{children:["\n",(0,s.jsxs)(e.tr,{children:["\n",(0,s.jsx)(e.th,{children:"异常字段"}),"\n",(0,s.jsx)(e.th,{children:"值"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(e.tbody,{children:["\n",(0,s.jsxs)(e.tr,{children:["\n",(0,s.jsx)(e.td,{children:"Message"}),"\n",(0,s.jsx)(e.td,{children:"错误的数量词"}),"\n"]}),"\n",(0,s.jsxs)(e.tr,{children:["\n",(0,s.jsx)(e.td,{children:"URL"}),"\n",(0,s.jsx)(e.td,{children:(0,s.jsx)(e.a,{href:"https://lab.alipay.com/user/activeUserValid.htm",target:"_blank",rel:"noopener noreferrer",children:"https://lab.alipay.com/user/activeUserValid.htm"})}),"\n"]}),"\n",(0,s.jsxs)(e.tr,{children:["\n",(0,s.jsx)(e.td,{children:"File"}),"\n",(0,s.jsx)(e.td,{children:(0,s.jsx)(e.a,{href:"https://static.alipay.com/min/?b=ar&f=arale.aspect-1.0.js,arale.class-1.0.js,arale.tmpl-1.0.js,aralex.base-1.1.js,alipay.common.PwdStrengthAnalyser-1.0.js,arale.uri-1.0.js,arale.http-1.1.js,alipay.http-1.1.js,aralex.validator-1.1.js,aralex.validator.PopValidator-1.0.js,aralex.apop-1.1.js&date=1320832734109&debug=1",target:"_blank",rel:"noopener noreferrer",children:(0,s.jsx)(e.a,{href:"https://static.alipay.com/min/?b=ar&f=...,alipay.common.PwdStrengthAnalyser-1.0.js,...&date=1320832734109&debug=1",target:"_blank",rel:"noopener noreferrer",children:"https://static.alipay.com/min/?b=ar&f=...,alipay.common.PwdStrengthAnalyser-1.0.js,...&date=1320832734109&debug=1"})})}),"\n"]}),"\n",(0,s.jsxs)(e.tr,{children:["\n",(0,s.jsx)(e.td,{children:"Line"}),"\n",(0,s.jsx)(e.td,{children:"1"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"密码强度算法中，使用了动态创建正则表达式来进行匹配的方法，但是这个表达式是来自用户的输入，\n在用户输入某些不匹配的特殊字符时，会抛出正则表达式类异常。"}),"\n",(0,s.jsx)(e.p,{children:"线上异常相关代码："}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"/**\n * 获取密码对应的评分\n * @param {string=} opt_strPassword 要检测的密码字符串，若不传入此参数，则默认取得绑定的表单元素的value值\n * @return {number} 密码强度评分\n */\ngetScore : function(opt_strPassword){\n    var strPassword = arale.isUndefined(opt_strPassword) ?\n        (this.needTrim ? S(this.domNode.node.value) : this.domNode.node.value) :\n        opt_strPassword;\n    //...\n\n    //附加支付宝规则：纯数字、连续大写英文、连续小写英文、单一英文\n    if(/^\\d+$/.test(strPassword) || this.M_STR.UPPER.indexOf(strPassword)> -1 ||\n        this.M_STR.LOWER.indexOf(strPassword)> -1 ||\n        strPassword.replace(new RegExp(strPassword.substring(0,1),'g'),'').length === 0 ){\n        nScore = 1;\n    }\n\n    return nScore;\n},\n"})}),"\n",(0,s.jsx)(e.p,{children:"这些正则表达式特殊字符，应该经过正确的转义处理。"}),"\n",(0,s.jsxs)(e.h2,{id:"相关异常",children:["相关异常",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#相关异常",children:"#"})]}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"/regular-expression-syntax-error",children:"正则表达式语法错误"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"/expected-xxx-in-regular-expression",children:"正则表达式中缺少 'XXX'"})}),"\n"]}),"\n",(0,s.jsxs)(e.h2,{id:"参考",children:["参考",(0,s.jsx)(e.a,{className:"header-anchor","aria-hidden":"true",href:"#参考",children:"#"})]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"http://msdn.microsoft.com/zh-tw/library/ie/k0e76ayf%28v=vs.94%29.aspx",target:"_blank",rel:"noopener noreferrer",children:"非預期的數量詞"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"http://msdn.microsoft.com/zh-cn/library/k0e76ayf%28v=vs.94%29.aspx",target:"_blank",rel:"noopener noreferrer",children:"意外的限定符"})}),"\n"]})]})}function a(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:e}=Object.assign({},(0,t.ah)(),n.components);return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}let i=a;a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["wiki%2Funexpected-quantifier.md"]={toc:[{text:"案例",id:"案例",depth:2},{text:"相关异常",id:"相关异常",depth:2},{text:"参考",id:"参考",depth:2}],title:"错误的数量词",headingTitle:"错误的数量词",frontmatter:{}}}}]);